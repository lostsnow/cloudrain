!function(){var t,e,n;t=jQuery,e=function(){function t(t){this.size=t.size||50,this.useLatest=t.useLatest||!1,this.ignoreEmpty=t.ignoreEmpty||!1,this.values=[],this.index=0,this.noMove=!1}return t.prototype.push=function(t){if(this.moving=!1,!this.ignoreEmpty||0!==t.length)return this.values.unshift(t),this.values.splice(this.size)},t.prototype.prev=function(){var t,e=this.size;return e>this.values.length&&(e=this.values.length),this.useLatest&&!this.moving||this.index>e-1?(this.noMove=!0,this.values[this.index-1]):(t=this.values[this.index],this.index+=1,this.moving=!0,this.noMove=!1,t)},t.prototype.next=function(){return this.index-=1,this.moving=!0,this.noMove=!1,this.index<0?(this.index=0,""):this.values[this.index]},t}(),n=function(t,e){switch(e||(e=function(t){}),typeof t){case"number":return function(e){return e.keyCode===t};case"string":return function(e){return""+e.keyCode===t};case"function":return t;default:return e}},t.fn.inputHistory=function(t){var i,s=this;return t||(t={}),t.data||(t.data="inputHistory"),t.store=n(t.store,function(t){return 13===t.keyCode&&!t.shiftKey}),t.prev=n(t.prev,function(t){return 38===t.keyCode||t.ctrlKey&&80===t.keyCode}),t.next=n(t.next,function(t){return 40===t.keyCode||t.ctrlKey&&78===t.keyCode}),i=this.data(t.data)||new e(t),this.data(t.data,i),this.bind("keydown",function(e){if(t.store(e)&&i.push(s.val()),t.prev(e)){if(s.val(i.prev()),i.noMove){var n=s.get()[0];n.selectionStart=n.selectionEnd=n.value.length}else s.select();e.preventDefault()}if(t.next(e))return s.val(i.next())&&s.select()&&e.preventDefault()}),this}}();